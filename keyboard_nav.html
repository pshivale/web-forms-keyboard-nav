<!DOCTYPE>

<html>

<head>
<script type="text/javascript" src="jquery-1.9.1.js"></script>
<script type="text/javascript">
	var KEY_RIGHT = 39;
	var KEY_UP = 38;
	var KEY_LEFT = 37;
	var KEY_DOWN = 40;
	function processKeyDown(event){
		//alert(event.keyCode);
		var source = event.target || event.srcElement;
		var left = $(source).offset().left
		var top = $(source).offset().top
		console.log(left, top);
		var compareTop, compareLeft, sortOn;
		if(event.keyCode == KEY_RIGHT){
			compareTop = isTopSame;
			compareLeft = isOnRight;
			sortOn = compareLeft;
		}else if(event.keyCode == KEY_LEFT){
			compareTop = isTopSame;
			compareLeft = isOnLeft;
			sortOn = compareLeft;
		}else if(event.keyCode == KEY_DOWN){
			compareTop = isDown;
			compareLeft = isLeftSame;
			sortOn = compareTop;
		}else if(event.keyCode == KEY_UP){
			compareTop = isUp;
			compareLeft = isLeftSame;
			sortOn = compareTop;
		}
		focusElement(source, compareTop, compareLeft, sortOn);
	}
	function focusElement(source, compareTop, compareLeft, sortOn){
		var element = getElement(source, compareTop, compareLeft, sortOn);
		$(element).focus();
	}
	function getElement(source, compareTop, compareLeft, sortOn){
		var candidates = [];
		$("input").each(function(){
			console.log(this.id);
			console.log($(this).offset().top, $(this).offset().left);
			if(compareTop(this, source) && compareLeft(this, source)){
				candidates.push(this);
			}
		});
		$(candidates).each(function(){
			console.log(this.id);
		});
		return $(candidates).sort(sortOn).first();
	}
	function isOnRight(a, b){
		return $(a).offset().left > $(b).offset().left;
	}
	function isOnLeft(a, b){
		return $(a).offset().left < $(b).offset().left;
	}
	function isDown(a, b){
		return $(a).offset().top > $(b).offset().top;
	}
	function isUp(a, b){
		return $(a).offset().top < $(b).offset().top;
	}
	function isTopSame(a, b){
		return $(a).offset().top == $(b).offset().top;	
	}
	function isLeftSame(a, b){
		return $(a).offset().left == $(b).offset().left;	
	}
</script>

</head>

<body>
hello<br/>
<input id="first-name" onkeydown="processKeyDown(event);"></input>
<input id="last-name" onkeydown="processKeyDown(event);"></input><br/>
<input id="age" onkeydown="processKeyDown(event);"></input>
<input id="email" onkeydown="processKeyDown(event);"></input>
<input id="phone" onkeydown="processKeyDown(event);"></input>
<input id="address-1" onkeydown="processKeyDown(event);"></input>
<input id="address-2" onkeydown="processKeyDown(event);"></input><br/>
<input id="note-1" onkeydown="processKeyDown(event);"></input>
<input id="comment" onkeydown="processKeyDown(event);"></input>
</body>

</html>